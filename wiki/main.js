navbarData = `
<li><a href="index.html">Home</a></li>
<li><a href="rules.html">Rules</a></li>
<li class="dropdown">
	<a class="dropbtn" href="races.html">Races</a>
	<div class="dropdown-content">
		<a href="races.html#human">Human</a>
		<a href="races.html#halfling">Halfling</a>
		<a href="races.html#dwarf">Dwarf</a>
		<a href="races.html#elf">Elf</a>
		<a href="races.html#half-elf">Half-Elf</a>
		<a href="races.html#urunk">Urunk</a>
		<a href="races.html#gnome">Gnome</a>
		<a href="races.html#goblin">Goblin</a>
	</div>
</li>
<li class="dropdown">
	<a class="dropbtn" href="character_classes.html">Classes</a>
	<div class="dropdown-content">
		<div class="slideout">
			<span>Rogue</span>
			<div class="slideout-content">
				<a href="thief.html">Thief</a>
				<a href="assassin.html">Assassin</a>
				<a href="con_artist.html">Con Artist</a>
				<a href="spy.html">Spy</a>
			</div>
		</div>
		<div class="slideout">
			<span>Warrior</span>
			<div class="slideout-content">
				<a href="brawler.html">Brawler</a>
				<a href="knight.html">Knight</a>
				<a href="soldier.html">Soldier</a>
				<a href="paladin.html">Paladin</a>
			</div>
		</div>
		<div class="slideout">
			<span>Outlander</span>
			<div class="slideout-content">
				<a href="ranger.html">Ranger</a>
				<a href="barbarian.html">Barbarian</a>
				<a href="druid.html">Druid</a>
				<a href="bard.html">Bard</a>
			</div>
		</div>
		<div class="slideout">
			<span>Mage</span>
			<div class="slideout-content">
				<a href="wizard.html">Wizard</a>
				<a href="sorcerer.html">Sorcerer</a>
				<a href="cleric.html">Cleric</a>
				<a href="necromancer.html">Necromancer</a>
			</div>
		</div>
		<div class="slideout">
			<span>Specialist</span>
			<div class="slideout-content">
				<a href="monk.html">Monk</a>
				<a href="artificer.html">Artificer</a>
				<a href="merchant.html">Merchant</a>
				<a href="aristocrat.html">Aristocrat</a>
			</div>
		</div>
	</div>
</li>
<li><a href="http://atuin.tcp4.me:4001/webclient/">Play!</a></li>
`

topicsData = `
<li><a href=alaforonaist'laiezeron.html>Alaforonaist'laiezeron</a></li>
<li><a href=arakh.html>Arakh</a></li>
<li><a href=aristocrat.html>Aristocrat</a></li>
<li><a href=artificer.html>Artificer</a></li>
<li><a href=assassin.html>Assassin</a></li>
<li><a href=axe.html>Axe</a></li>
<li><a href=barbarian.html>Barbarian</a></li>
<li><a href=bard.html>Bard</a></li>
<li><a href=bardiche.html>Bardiche</a></li>
<li><a href=battleaxe.html>Battleaxe</a></li>
<li><a href=brawler.html>Brawler</a></li>
<li><a href=calendar.html>Calendar</a></li>
<li><a href=character_classes.html>Character Classes</a></li>
<li><a href=claymore.html>Claymore</a></li>
<li><a href=cleric.html>Cleric</a></li>
<li><a href=club.html>Club</a></li>
<li><a href=con_artist.html>Con Artist</a></li>
<li><a href=cult_of_the_old_spirits.html>Cult of the Old Spirits</a></li>
<li><a href=dagger.html>Dagger</a></li>
<li><a href=druid.html>Druid</a></li>
<li><a href=elvish_celestialism.html>Elvish Celestialism</a></li>
<li><a href=faith_of_litmeate.html>Faith of Litmeate</a></li>
<li><a href=faith_of_ratawanda.html>Faith of Ratawanda</a></li>
<li><a href=flail.html>Flail</a></li>
<li><a href=four_planes.html>The Four Planes of Existence</a></li>
<li><a href=greataxe.html>Greataxe</a></li>
<li><a href=grireverchism.html>Grireverchism</a></li>
<li><a href=halberd.html>Halberd</a></li>
<li><a href=javelin.html>Javelin</a></li>
<li><a href=kazan'zaram.html>Kazan'zaram</a></li>
<li><a href=knight.html>Knight</a></li>
<li><a href=longsword.html>Longsword</a></li>
<li><a href=mace.html>Mace</a></li>
<li><a href=merchant.html>Merchant</a></li>
<li><a href=military_fork.html>Military Fork</a></li>
<li><a href=monk.html>Monk</a></li>
<li><a href=necromancer.html>Necromancer</a></li>
<li><a href=orlorianism.html>Orlorianism</a></li>
<li><a href=paladin.html>Paladin</a></li>
<li><a href=partisan.html>Partisan</a></li>
<li><a href=pike.html>Pike</a></li>
<li><a href=quarterstaff.html>Quarterstaff</a></li>
<li><a href=races.html>Races of Amathereon</a></li>
<li><a href=ranger.html>Ranger</a></li>
<li><a href=rapier.html>Rapier</a></li>
<li><a href=rift.html>The Rift</a></li>
<li><a href=rules.html>Rules</a></li>
<li><a href=sabre.html>Sabre</a></li>
<li><a href=scythe.html>Scythe</a></li>
<li><a href=shadow_worship.html>Shadow Worship</a></li>
<li><a href=shield.html>Shield</a></li>
<li><a href=shortsword.html>Shortsword</a></li>
<li><a href=skills.html>Skills</a></li>
<li><a href=soldier.html>Soldier</a></li>
<li><a href=sorcerer.html>Sorcerer</a></li>
<li><a href=spear.html>Spear</a></li>
<li><a href=spy.html>Spy</a></li>
<li><a href=sword.html>Sword</a></li>
<li><a href=swordbreaker.html>Swordbreaker</a></li>
<li><a href=thief.html>Thief</a></li>
<li><a href=throwing_knife.html>Throwing Knife</a></li>
<li><a href=warhammer.html>Warhammer</a></li>
<li><a href=way_of_the_oracle.html>The Way of the Oracle</a></li>
<li><a href=wizard.html>Wizard</a></li>
`

copyrightData =
`<hr/><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><p>Copyright Â© 2023 mOctave. <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Amathereon</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>. Maps are created using Azgaar's <a href="https://azgaar.github.io/Fantasy-Map-Generator/">Fantasy Map Generator</a>. Amathereon uses the <a href="https://www.evennia.com/">Evennia</a> MUD engine. Inspiration was taken from Dungeons and Dragons, Arda, and Discworld. All other elements are either my own creation or are in the public domain.</p>`

seriesReligionData =
`
<b>Religions of Amathereon</b><br/>
<div>
<i>See Also:</i><br/>
<a href="cult_of_the_old_spirits.html">Cult of the Old Spirits</a><br/>
<a href="elvish_celestialism.html">Elvish Celestialism</a><br/>
<a href="faith_of_litmeate.html">Faith of Litmeate</a><br/>
<a href="faith_of_ratawanda.html">Faith of Ratawanda</a><br/>
<a href="grireverchism.html">Grireverchism</a><br/>
<a href="kazan'zaram.html">Kazan'zaram</a><br/>
<a href="orlorianism.html">Orlorianism</a><br/>
<a href="shadow_worship.html">Shadow Worship</a><br/>
<a href="way_of_the_oracle.html">Way of the Oracle</a><br/>
</div>
`

seriesWeaponData =
`
<b>Weapons of Amathereon</b><br/>
<div>
<i>Bladed Weapons</i></br>
<a href="sword.html">Sword</a><br/>
<a href="longsword.html">Longsword</a><br/>
<a href="shortsword.html">Shortsword</a><br/>
<a href="claymore.html">Claymore</a><br/>
<a href="rapier.html">Rapier</a><br/>
<a href="dagger.html">Dagger</a><br/>
<a href="throwing_knife.html">Throwing Knife</a><br/>
<a href="swordbreaker.html">Swordbreaker</a><br/>
<a href="sabre.html">Sabre</a><br/>
<br/><i>Cleaving Weapons</i></br>
<a href="axe.html">Axe</a><br/>
<a href="battleaxe.html">Battleaxe</a><br/>
<a href="greataxe.html">Greataxe</a><br/>
<a href="warhammer.html">Warhammer</a><br/>
<br/><i>Polearms</i></br>
<a href="spear.html">Spear</a><br/>
<a href="bardiche.html">Bardiche</a><br/>
<a href="halberd.html">Halberd</a><br/>
<a href="military_fork.html">Military Fork</a><br/>
<a href="pike.html">Pike</a><br/>
<a href="partisan.html">Partisan</a><br/>
<a href="scythe.html">Scythe</a><br/>
<a href="javelin.html">Javelin</a><br/>
<br/><i>Other Weapons</i></br>
<a href="club.html">Club</a><br/>
<a href="quarterstaff.html">Quarterstaff</a><br/>
<a href="flail.html">Flail</a><br/>
<a href="mace.html">Mace</a><br/>
<a href="shield.html">Shield</a><br/>
</div>
`

seriesClassData = 
`
<b>Character Classes</b><br/>
<div>
<i>Rogue</i><br/>
<a href="thief.html">Thief</a><br/>
<a href="assassin.html">Assassin</a><br/>
<a href="con_artist.html">Con Artist</a><br/>
<a href="spy.html">Spy</a><br/>
<br/><i>Warrior</i><br/>
<a href="brawler.html">Brawler</a><br/>
<a href="knight.html">Knight</a><br/>
<a href="soldier.html">Soldier</a><br/>
<a href="paladin.html">Paladin</a><br/>
<br/><i>Outlander</i><br/>
<a href="ranger.html">Ranger</a><br/>
<a href="barbarian.html">Barbarian</a><br/>
<a href="druid.html">Druid</a><br/>
<a href="bard.html">Bard</a><br/>
<br/><i>Mage</i><br/>
<a href="wizard.html">Wizard</a><br/>
<a href="sorcerer.html">Sorcerer</a><br/>
<a href="cleric.html">Cleric</a><br/>
<a href="necromancer.html">Necromancer</a><br/>
<br/><i>Specialist</i><br/>
<a href="monk.html">Monk</a><br/>
<a href="artificer.html">Artificer</a><br/>
<a href="merchant.html">Merchant</a><br/>
<a href="aristocrat.html">Aristocrat</a><br/>
`


// Called when the body is loaded
function bodyInit() {
	populateNavbar()
	populateTopics()
	populateCopyright()
	populateReligionData()
	populateWeaponData()
	populateClassData()

	recolourLinks()
	addBannerNotice("<b>We're moving!</b> On Saturday June 24,<a href='atuin.tcp4.me/amathereon/wiki/'>the Amathereon wiki</a>will move to amathereon.tcp4.me, and ports 4000-4006 on atuin.tcp4.me will be replaced with equivalent ports on amathereon.tcp4.me.", "#FA0")
}


// Fill the first navbar on the page with navbar data
function populateNavbar() {
	try {
		document.getElementsByClassName("navbar")[0].innerHTML = navbarData
		console.log("Navbar populated!")
	} catch {
		console.error("Navbar could not be filled. Check if it exists.")
	}
}


// Fill the first topics box on the page with topic data
function populateTopics() {
	try {
		document.getElementsByClassName("topics")[0].innerHTML = topicsData
		console.log("Topics box populated!")
	} catch {
		console.warn("Topics box could not be filled. This can be ignored if no topics box was defined.")
	}
}


// Fill the first copyright box on the page with copyright data
function populateCopyright() {
	try {
		document.getElementsByClassName("copyright")[0].innerHTML = copyrightData
		console.log("Copyright box populated!")
	} catch {
		console.error("Copyright box could not be filled. Check if it exists.")
	}
}


// Fill a religion data series box on the page with series data
function populateReligionData() {
	try {
		document.getElementById("series-religion").innerHTML = seriesReligionData
		console.log("Series data box populated!")
	} catch {
		console.warn("Series data box could not be filled. This can be ignored if no series data box was defined.")
	}
}


// Fill a weapon data series box on the page with series data
function populateWeaponData() {
	try {
		document.getElementById("series-weapon").innerHTML = seriesWeaponData
		console.log("Series data box populated!")
	} catch {
		console.warn("Series data box could not be filled. This can be ignored if no series data box was defined.")
	}
}


// Fill a class data series box on the page with series data
function populateClassData() {
	try {
		document.getElementById("series-class").innerHTML = seriesClassData
		console.log("Series data box populated!")
	} catch {
		console.warn("Series data box could not be filled. This can be ignored if no series data box was defined.")
	}
}


// Recolour all links to the current page
function recolourLinks() {
	console.log(document.URL)
	currentLinks = document.querySelectorAll('a[href="'+document.URL+'"]')
	currentLinks.forEach(link => link.className += ' current-link');

	filename = document.URL.split('/').pop().split('#')[0].split('?')[0];
	console.log(filename)
	currentLinks = document.querySelectorAll('a[href="'+filename+'"]')
	currentLinks.forEach(link => link.className += ' current-link');
}

function addBannerNotice(notice, colour) {
	console.log("Adding Banner Notice")
	document.getElementsByTagName("html")[0].innerHTML += `<div class="noticebanner" style="background-color:`+colour+`"><p>`+notice+`</p></div>`
}


// The function actually applying the offset
function offsetAnchor() {
    if(location.hash.length !== 0) {
        window.scrollTo(window.scrollX, window.scrollY - 50);
    }
}


// This will capture hash changes while on the page
window.addEventListener("hashchange", offsetAnchor);

// This is here so that when you enter the page with a hash,
// it can provide the offset in that case too. Having a timeout
// seems necessary to allow the browser to jump to the anchor first.
window.setTimeout(offsetAnchor, 1); // The delay of 1 is arbitrary and may not always work right (although it did in my testing).

